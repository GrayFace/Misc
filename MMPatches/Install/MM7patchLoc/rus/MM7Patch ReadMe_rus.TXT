GrayFace MM7 Patch v2.5.6
Автор: Сергей Роженко <mailto:sergroj@mail.ru>
https://grayface.github.io/ru/

Данный патч также включает официальный патч, Mok's patch и патч Black Phantom'а.
Файлы сохранённых игр, разумеется, полностью совместимы с непатченной игрой (в обе стороны).
Для простоты, у патча нет деинсталлятора.
Все настройки патча - в файле mm7.ini, который заполняется основными опциями при первом запуске игры.
Все опции UILayout описаны близко к концу данного файла в секции "Гибкий интерфейс". В списке изменений они начинаются с "UI.txt:".

([+] - фича, [-] - исправленный баг, [*] - другое)

Изменения версии 2.5.6:
  << MM6 - MM8 >>
[+] Новая команда, доступная для скриптов карт (*.evt), которая позволила сделать некоторые изменения патча в MM6 и MM7 (код 0x45 - RefundChestArtifacts).
[-] Иногда лежащие на земле предметы из одной карты появлялись в другой при перемещении пешком. Чтобы отключить исправление, добавьте FixItemDuplicates=0 в INI.
[-] Мой баг: Опция "DisableHooks" не работала для некоторых новых хуков.
[-] Мой баг: При использовании своих архивов *.games.lod неверные данные писались в автосохранение при старте новой игры. Это ни на что не влияло до версии 2.5.4.
  << MM7, MM8 >>
[-] Мой баг: Исправление для бага/ограничения DirectX 7 применялась слишком рано, приводя к вылету под Wine.
  << MM7 >>
[-] Мой баг, вызванный странной локализацией: В немецкой версии игры команда начинала стрелять факелами при установке патча 2.5.*. Это исправление также правит нестандартные размеры некоторых спрайтов в этой локализации.
  << Исправления на картах >>
[-] Лабиринт (d02), Цитадель Титанов (d09): В недоступных сундуках могли генерироваться артефакты, в результате уменьшалось число артефактов, которые можно найти.

Изменения версии 2.5.5:
  << MM6 - MM8 >>
[-] Мой баг: Взятие предмета из инвентаря могло приводить к повреждению данных о сопротивляемостях персонажа.
[-] Мой баг: Изменения версии 2.5.4 сломали опцию "FixChests".
  << MM7, MM8 >>
[*] Опция "FixUnmarkedArtifacts" теперь учитывает лимит в 13 найденных артефактов, устанавливаемый игрой.

Изменения версии 2.5.4:
  << MM6 - MM8 >>
[-] Теперь, при респауне локации, все сгенерированные артефакты из не открытых сундуков убираются из списка найденных артефактов.
  << MM7, MM8 >>
[-] Мой баг: Опция "FixMonstersBlockingShots" работала неверно.
  << MM7 >>
[*] Я отключил опцию "FixUnmarkedArtifacts" по умолчанию, т.к. в Цитадели Титанов был артефакт в недоступном сундуке, который также остался в моде Rev4 и в играх, начатых до этой версии патча.
[-] Мой баг: Опция "IndoorFovMul" работала только в режиме UILayout.
  << Исправления на картах >>
[-] Цитадель Титанов (d09), Храм Тьмы (t02): В недоступных сундуках могли генерироваться артефакты, учитывающиеся, как найденные командой.

Изменения версии 2.5.2:
  << MM6 - MM8 >>
[*] Теперь на экране "Данные" персонажа показывается состояние, определяющее его показатели, а в других местах показывается наиболее серьёзное состояние.
  << MM6, MM7 >>
[-] Теперь диалог простого сообщения (например, сообщение обелиска) не пропускается при нажатии любой клавиши. В MM7 оно так же не остаётся на экране после отмены. Чтобы отключить исправление, добавьте DontSkipSimpleMessage=0 в INI.
  << MM7, MM8 >>
[-] После диалога со стражем показывалось сообщение "Здесь ничего нет".
[-] Мой баг: Список всех состояний не показывался при правом клике по строке "Состояние" в экране персонажа.

Изменения версии 2.5.1:
  << MM7, MM8 >>
[-] Мой баг: Тип урона Энергия не показывался в свойствах монстра с умением идентификации.

Изменения версии 2.5:
  << MM6 - MM8 >>
[+] Установите ShooterMode=1, чтобы включить режим шутера от первого лица. Кнопка атаки включает/выключает режим битвы, в котором левая кнопка мыши вызывает атаку, а правая - использование быстрого заклинания. Обычная кнопка быстрого заклинание тоже работает. При этом стрелы летят в прицел, а не в ближайшего врага. Иконка меча показывает, что включён этот режим, а также здоровье выбранного (или последнего атакованного) монстра.
[+] Теперь можно установить заклинание, которое будет использоваться при нажатии кнопки обычной атаки. Например, Распыление яда можно назначить, как заклинание атаки, а Лечение - как обычное быстрое заклинание. Чтобы отключить, добавьте EnableAttackSpell=0 в INI.
[+] Опция "ViewDistanceD3D" для увеличения дальности обзора в режиме аппаратного 3D, по умолчанию уже увеличенная до 12000. В режиме программного 3D можно немного увеличить дальность при помощи опции "dist_mist". Известный баг, который я пока что не исправил: значения "ViewDistanceD3D" больше 8192 (стандартная дальность в игре) приводят к тому, что изредка ненадолго пропадает ближний полигон земли.
[+] Опция MouseSensitivityDirectMul позволяет использовать работать с мышью напрямую. Системное ускорение мыши при этом игнорируется. Чтобы включить, установите положительное значение - например, 1.0.
[+] Изменены приоритеты состояний игрока, чтобы демонстрировать самое плохое (слабость, порча и т.п.). Чтобы отключить, добавьте FixConditionPriorities=0 в INI. Новы порядок состояний: Уничтожен, Смерть, Окаменение, В коме, Паралич, Сон, Слабость, Порча, Болезнь3, Яд3, Болезнь2, Яд2, Болезнь1, Яд1, Безумство, Навеселе, Страх, Зомби.
[+] Теперь, пока зажата правая кнопка мыши, показывается подсказка для элемента, на который наведена мышь. Это особенно полезно для проверки времени. Чтобы отключить, добавьте ShowHintWithRMB=0 в INI.
[+] В инвентаре неидентифицированные предметы теперь показываются зелёным пока нажата правая кнопка мыши. Чтобы отключить, добавьте GreenItemsWhileRightClick=0 в INI.
[+] Установите DeadPlayerShowItemInfo=1, чтобы видеть описание предметов игроков без сознания при правом клике.
[+] Улучшенное исправление для возможности совершать действия неактивным персонажем - теперь неактивных персонажей можно выбирать, но при нажатии кнопки атаки выбирается активный игрок.
[+] Опция "MouseLookPermKey" задаёт клавишу, которая переключает режим управления мышью, но он не сбрасывается при открытии любого диалога.
[+] Если установить ExitDialogsWithRightButton=1, нажатие правой кнопки мыши будет закрывать (как Esc) многие диалоги (в домах, диалогах с людьми, при входе в локации и при показе сообщения).
[+] Скрытая опция WinScreenDelay задаёт задержку экрана победы, во время которой игнорируется весь ввод. По умолчанию 500 (пол секунды вместо 5 секунд, которые были в игре изначально).
[+] Установите AddDescriptions=1, чтобы добавить в INI описания опций. Установите -1, чтобы их убрать.
[+] Опция "MonSpritesSizeMul" позволяет менять размер монстров в диалоге при клике по ним правой кнопкой - например, поставьте 0.5, если увеличели их в 2 раза. Моды могут менять этот множитель динамически через API опций патча.
[+] Анимация в домах больше не начинается с начала при каждом клике элемента диалога. Чтобы отключить, добавьте FixHouseAnimationRestart=0 в INI.
[+] Проверка свободного места при сохранении игры. Чтобы отключить, добавьте CheckFreeSpace=0 в INI.
[+] Автоматическое определение времени, отводящегося на фразу конюха и моряка перед отправкой. Скрытые опции "HorsemanSpeakTimeLimit" и "BoatmanSpeakTimeLimit" определяют лимит времени их разговора.
[+] Жезлы больше не исчезают, когда у них кончаются заряды, а просто ломаются. Чтобы отключить это изменение, добавьте KeepEmptyWands=0 в INI.
[+] Исправленная графика для монстров, которые во всех 3 вариациях выглядели одинаково.
[-] Изменение графики предметов приводило к "битым" клеткам в инвентаре.
[-] Распыление яда, Шрапнель и вторые заклинания монстров наносили неверный урон. Шрапнель к тому же не разлеталась в разные стороны, как должна была. Чтобы отключить исправления, добавьте FixMonsterSpells=1 в INI. (спасибо cthscr)
[-] Заклинание и атаки, наносящие урон группе монстров, не работали против парализованных монстров.
[-] Подсказки элементов в некоторых диалогах не прятались, когда мышь с них переведена на свободное пространство. Чтобы вернуть такое поведение, добавьте FixMonsterSpells=0 в INI. Значение по умолчанию 2 означает, что подсказка остаётся в течение 2 кадров, а потом исчезает.
[-] Если заклинание уже активно, использование более сильной, но менее долгой его версии игнорировалось.
[-] Заклинания, применяемые к предмету, приводили к глюкам, если применялись к самому первому предмету инвентаря.
[-] При поднятии украденных у команды ворами предметов, это не отражалось в сообщении о находке.
[-] Атаки монстров приводили к смене игрока, даже при нулевом времени восстановления (за счёт большой выносливости).
[-] При использовании быстрого заклинания проверка стоимости в мане была неверна (она относила максимальное заклинание школы магии к следующей школе) When casting a Quick Spell the spell points check was incorrect (it assigned GM spell to another school of magic)
[-] Игра не запускалась нормально, если текущая папка не совпадала с папкой игры. Чтобы отключить исправление, добавьте KeepCurrentDirectory=1 в INI.
[-] Персонажи без сознания могли опознавать и чинить предметы при показе инвентаря в магазинах. Чтобы отключить исправление, добавьте FixDeadPlayerIdentifyItem=0 в INI.
[-] Ещё одна ситуация, в которой игра могла вылетать из-за наличия граней без вершин.
[-] Эффекты наступления нового дня (слабость, безумие и т.п.) не наступали, в начале месяца, если нажать "Ждать до рассвета" и сразу Esc.
[-] Часто в 5:00 в течении минуты была полная яркость освещения на внешних картах.
[-] При генерации случайного предмета первый подходящий предмет имел повышенную вероятность, а последний - пониженную. (Спасибо Tomsod за это и множество других исправлений, которые я включил в патч)
[-] Длительность заклинаний показывалась неверно в таких ситуациях, как "1 день 5 минут".
[-] Строка длительности заклинания у предметов и строка "N/A" (теперь "нет") для урона дальнего боя не могли быть локализованы.
[-] Хождение по воде должно потреблять ману каждые 20 минут, но потребляло каждые 5. Чтобы отключить исправление, добавьте FixWaterWalkManaDrain=0 в INI.
[-] Мой баг: При помощи управления с клавиатуры можно было выучить недоступные умения заклинаний.
[*] Если умения магии не вмещаются на экране умений (например, как результат смены профессии в моде Rev4 для MM7), теперь они рисуются поверх кнопок - это всё-равно лучше, чем совсем не иметь к ним доступа.
[*] Логотипы 3DO и пр. теперь показываются, если заставка была отложена при помощи опции NoIntro=1. Логотипы можно пропустить нажатием Esc и посмотреть заставку. Чтобы отключить, добавьте NoIntoLogos=0 в INI.
  << MM6, MM7 >>
[-] Горизонтальная скорость снега слишком сильно менялась при движении влево-вправо.
[-] На старте игры экран с копирайтом оставался висеть, если окно игры не было в фокусе при его появлении.
[-] Страница "Заслуги" не обновлялась при смене персонажа нажатием клавиши Tab.
[-] Заклинание 'Очарование' имело неверные длительности.
  << MM7, MM8 >>
[+] UI.txt: В новом режиме "FloatingScreens" инвентарь, дома и другие подобные экраны показываются в панели.
[+] Скрытая опция IndoorFovMul задёт число, на которое область обзора меняется в помещениях в режиме аппаратного ускорения. По умолчанию 0.813.
[+] Скрытая опция TrueColorSprites, которая по умолчанию отключена, чтобы избежать нехватки памяти при использовании спрайтов монстров высокого качества.
[+] Игра больше не вылетает при отсутствии d3dsprite.hwl и d3dbitmap.hwl.
[+] Если в *.icons.lod присутствует файл "Mapbkg", он будет использован, как фон мини-карты. Это позволит дальтоникам лучше видеть на мини-карте синие точки.
[+] Теперь взрывы на загораживают монстров от указателья мыши и в режиме аппаратного 3D. Чтобы отключить, добавьте ClickThroughEffects=0 в INI.
[+] При обнаружении ddraw.dll в папке игры (патч считает, что это dgVoodoo), будет задан вопрос, хотите ли Вы её использовать и опции SystemDDraw будет присвоенно соответствующее значение.
[+] Теперь можно взбираться на более отвесные скалы, как раньше, когда игра только вышла. Чтобы отключить, добавьте ClimbBetter=0 в INI.
[-] Если установить FixMonstersBlockingShots=1, вражеские монстры не будут блокировать выстрелы друг друга и выстрелы не будут зависать в воздухе. Также это исправит баг, не дающий воскрешенным монстром попадать выстрелами в монстров того же типа. Это может увеличить сложность некоторых сражений - например, сражения в моде Rev4.
[-] Баг DirectX 7: невозможность поддержки больших разрешений экрана в режиме аппаратного ускорения.
[-] Исправлена проблема совместимости с Windows 10 и в игре, и в MM7Setup. Также в MM7Setup разблокирован оконный режим.
[-] Изменение скриптом статической текстуры на анимированную приводило к вылету при следующей загрузке локации.
[-] Монстры за пределами активного радиуса, в которых попали стрелы, показывались на карте зелёными точками.
[-] В экране "Показать снаряжение" невозможно было что-либо делать с персонажами без сознания.
[-] Бонусы к повреждению предметов от улучшений "Наемных Убийц" и "Варваров" не работали.
[-] Уровень заклинаний Гранд не читался из Monsters.txt при написании "GM".
[-] Ледяной взрыв превращался в Ледяную молнию при чтении из Monsters.txt. Чтобы отключить исправление, добавьте FixIceBoltBlast=0 в INI.
[-] Тип повреждения Энергия превращался в землю при чтении из Monsters.txt. Чтобы отключить исправление, добавьте FixEnergyDamageType=0 в INI.
[-] Файл gamma.pcx создавался при каждом открытии меню.
[-] Заклинание "Испить душу" действовало за пределами радиуса команды. Чтобы отключить исправление, добавьте FixSouldrinker=0 в INI.
[-] Заклинание Всплеск кислоты наносило физический урон.
[-] Невозможно было сменить копьё на меч или кинжал кликом по кукле персонажа, если умение копья ниже Мастера.
[-] Зависание Аркомага при определённых обстоятельствах.
[-] Хождение по воде наносило урон огнём.
[-] Бонус умения лука от предметов не влиял на повреждения при уровне умения лука Великий магистр.
[-] Когда один монстра атаковал другого заклинанием, при вычислении урона использовалось неверное заклинание.
[-] Монстры в ближнем бою под действием заклинания "Берсерк" попадали по игроку из далека, если их жертва уже мертва.
[-] Неудавшаяся алхимия могла ломать закаленные предметы.
[-] Зачарование "Кислоты" наносило урон от Холода вместо урона от Тела.
[-] Заклинание "Армагеддон" наносило урон, к которому у монстров не бывает защиты. Теперь оно наносит урон магии Тьмы. Чтобы отключить исправление, добавьте ArmageddonElement=5 в INI.
[-] Событие ухода с карты не вызывалось при поездке на лошадях или лодке.
[-] Когда монстр призывал другого монстра, происходил вылет, если предел числа монстров уже достигнут.
[-] Тип атаки монстра "Тело" превращался в физический при чтении из Monsters.txt.
[-] Мой баг: Вылет в полноэкранном режиме при BorderlessFullscreen=0.
[-] Мой баг: Мипмэпки были всегда включены в полноэкранном режиме, если BorderlessFullscreen=0 и MipmapsCount>1.
[-] Мой баг: Пустые картинки приводили к делению на 2 в режиме гибкого интерфейса.
[-] Мой баг: Пустые спрайты вызывали вылет в режиме аппаратного 3D.
[-] UI.txt: В экране выхода из подземелья 3D вид был смещён вертикально.
[-] UI.txt: Диалог "Нажмите Escape" не показывался после экрана победы.
  << MM7 >>
[-] Если есть невыплаченные штрафы, выигрыш/проигрыш в аркомаге не добавлялся в награды.
[-] NPC Знахарь-мастер портил умения персонажей при использовании.
[-] Артефакты не генерировались нормально, как объекты на земле.
[-] Артефакты, сгенерированные специфическим образом (как предметы 7-го уровня) не отмечались, как найденные. Чтобы включить исправление, добавьте FixUnmarkedArtifacts=1 в INI (с версии 2.5.4 оно отключено по умолчанию).
[-] Лич имел иммунитет к любой магии, к которой у него сопротивление 200 или больше. Чтобы отключить исправление, добавьте FixLichImmune=0 в INI.
[-] NPC с действием ("Исцелить отряд", заклинание и т.п.) имели 1 невидимый (и не работающий) пункт диалога, который сдвигал вверх остальные пункты.
[-] Зачарование "(Давида)" не работало на луках.
[-] Артефакт "Виселица" наносил двойной урон только нежити.
[-] Заклинание 'Глава нежити' не работало на уровне Гранд.
[-] Заклинания 'Очарование' и 'Глава нежити' не работали на уровне Мастер и Гранд соответственно.
[-] Жезл, украденный у г-на Мальвика, имел случайное число зарядов после перезарядки.
[-] При воровстве у монстра показывалось неверное сообщение.
[-] Тёмные таверны и тренировочные центры поглощали больше времени, чем должны. Чтобы отключить исправление, добавьте FixDarkTrainers=0 в INI.
[-] Щит "Келебрим" не понижал защиту от земли на 30, как должен (я сомневался, нужно ли это исправление для такого слабого щита, но оказалось, что урон Земли наносят только взрывы Големов, Элементали Земли и Деревья). Чтобы отключить исправление, добавьте FixKelebrim=0 в INI.
[-] Белые бочки (+2 удачи) не генерировались на картах.
[-] Гидрокостюм повышал время восстановления.
[-] Монстры не могли использовать заклинания Паралич/Точный взрыв/Изменение веса, но тратили ход.
[-] UI.txt: Длинный текст простого сообщения воспринимался, как диалог прогресса.
  << Исправления на картах >>
[-] Стены Тумана (d11): Если использовать 1 или 2 ключа и затем сохраниться-загрузиться, дверь не открывалась, если вставить оставшиеся ключи.
[-] Стены Тумана (d11): Не все грани пьедесталов с замочными скважинами реагировали на нажатие мыши.
[-] Врата в Бездну (t04): В переводе Буки двери назывались "Сундук".
[-] После выполнения квеста про Волшебную Свирель, он записывался в Заслуги только у одного персонажа.
[-] Гномы-солдаты и чудища были слишком толстыми и застревали в проходах.


Изменения версии 2.4:
  << MM6 - MM8 >>
[+] Сундуки заполняются компактно и не случайно, если так вмещается больше вещей. Это изменение можно отключить, добавив строку FixChestsByCompacting=0 в INI.
[+] Вещи помещаются в сундуки вертикальными рядами, когда Вы их туда бросаете. Это изменение можно отключить, добавив строку PlaceChestItemsVertically=0 в INI.
[+] Размер спрайтов корректируется в зависимости от угла наклона. Так они ведут себя реалистичнее, особенно при взгляде вверх на высоких монстров. Это изменение можно отключить, добавив строку SpriteAngleCompensation=0 в INI.
[+] Когда NoIntro=1, вступительный видеоролик в MM6 показывается при нажатии кнопки "Новая игра", а в MM8 - после создания отряда. В MM7 так было и раньше. Добавьте PostponeIntro=0 в INI, чтобы полностью отключить этот вступительный ролик. В MM7 также можно установить PostponeIntro=2, чтобы первый вступительный ролик показывался при нажатии кнопки "Новая игра".
[+] Теперь в режиме программной отрисовки взрывы и снаряды игнорируются при выборе цели мыши. Раньше команда не могла "прицелиться" в монстра, если но закрыт взрывом. Это исправление можно отключить, добавив строку ClickThroughEffects=0 в INI.
[+] Низкоуровневая настройка, нужда в которой не должна возникать: опция DisableHooks позволяет отключать хуки, воздействующие на конкретные адреса. Это разделённый запятыми список адресов в 16-ичной системе. Не используйте старый способ отключения хуков по их номерам, т.к. номера меняются от версии к версии.
[+] Низкоуровневое: Диалог входа в подземелье теперь можно вызывать из пункта разговора с NPC где угодно.
[-] Анимация спрайтов воспроизводилась неверно - первый кадр был длиннее, а последний - короче. Это исправление можно отключить, добавив FixSFT=0 в INI.
[-] Мой баг: клавиатурное управление сломало команду evt.Question в домах (она используется для загадок Эскатона в MM8).
  << MM7, MM8 >>
[+] Поддержка архивов bitmaps.lwd с текстурами повышенного разрешения в режиме аппаратного ускорения. Я немного написал на английском про них и дополнительные LOD'ы в целом здесь: https://www.dropbox.com/s/iv9c2jc8abbrj6a/CustomLods.txt?dl=0
[+] Низкоуровневое: 32-битный цвет спрайтов и текстур в режиме аппаратного ускорения. Это изменение можно отключить, добавив строку TrueColorTextures=0 в INI.
[+] Улучшенное качество воды в режиме аппаратного ускорения.
[+] UI.txt: При включённой (по умолчанию) опции ShrinkStatusbar размер строки состояния подстраивается под размер текста в ней.
[+] UI.txt: Опция HideStatusbar управляет тем, будет ли прятаться строка состояния, когда в ней нет текста (включена по умолчанию).
[+] Опция TreeHints управляет показом подсказок для не интерактивных спрайтов-декораций (по умолчанию показываются в MM7 и не показываются в MM8). Если установить значение 2, то они будут показываться даже в режиме гибкого интерфейса с автоскрытием строки состояния.
[+] Улучшенные сообщения об ошибках при инициализации Direct3D (теперь не только в оконном режиме).
[-] Декорации (деревья и т.п.) с установленным идентификатором считались интерактивными, не будучи такими. Чтобы отключить это исправление, добавьте строку SpriteInteractIgnoreId=0 в INI.
[-] Гранд топора не уменьшал броню врагов вдвое. Теперь шанс уменьшить броню увеличивается на 1.66 за каждую единицу умения, таким образом при умении 60 шанс равен 100%. Такой высокий шанс призван компенсировать общую слабость топоров, как оружия. Скрытая опция AxeGMFullProbabilityAt контролирует это (по умолчанию 60).
[-] Эффекты монстров Disease2 и Disease3, которые должны вызывать болезнь, не работали. Disease1 работал, как должен Disease3. Эффекты Poison2 и Poison3 были перепутаны.
[-] Мой/DirectX баг: Игра не могла стартовать в разрешениях более 1080p, т.к. Direct3D 7 их не поддерживает.
[-] Мой баг: Игра могла вылететь при нажатии Esc в режиме UI Layout.
[-] Мои баги: Несколько багов, случающихся при определённой структуре файла определения гибкого интерфейса.
  << MM7 >>
[+] Добавлена поддержка MM7ResTool на всякий случай, и предупреждение на старте о том, что он больше не актуален. Предупреждение можно отключить, добавив строку SupportMM7ResTool=1 в INI.
[-] Щит Славы не увеличивал Магию Духа.
[-] Эскорт Леди не давал Хождение по воде.
[-] Низкоуровневое: Нажатие пробела приводило к закрытию диалога команды evt.Question.
[-] Низкоуровневое: Мой баг: Поле ввода диалога команды evt.Question не показывалось в режиме гибкого интерфейса с автоскрытием строки состояния.
  << Исправления на картах >>
[-] Тулареанский лес (out04): В Лабораторию Кланкера невозможно было попасть после того, как её займёт Арчибальд, хотя сам он при этом говорит, что игрок может войти и попрактиковаться на монстрах внутри.

Изменения версии 2.3.1:
  << MM7, MM8 >>
[-] Мой баг: опции ScalingParam1 и ScalingParam2 игнорировались в режиме гибкого интерфейса.

Изменения версии 2.3:
  << MM6 - MM8 >>
[+] Опция PaperDollInChests показывает куклу персонажа в диалоге сундука: значение 1 (по умолчанию) показывает её при открытии инвентаря, значение 2 показывает её сразу при открытии сундука, значение 0 отключает опцию.
[+] Клавиатурное управление: в некоторых диалогах можно использовать клавиши Вверх/Вниз и Enter. Например, в диалогах с NPC. Затрагиваются только диалоги, в которых для включения поддержки клавиатуры и так было всё готово в оригинальных играх.
[+] Диалоги сохранения и загрузки теперь реагируют на нажатие Enter.
[+] Более новая версия MP3DEC.ASI. В теории это может помочь устранить какие-то проблемы с проигрыванием файлов MP3.
[-] Мой баг: Если, каким-то образом, окно игры становилось меньше 640x480, это приводило к глюку в режиме программной отрисовки с включённой поддержкой 32-битного цвета.
  << MM6, MM7 >>
[-] Мой баг: Нажатие на клавишу быстрой загрузки во время видео смерти позже приводило к вылету.
  << MM7, MM8 >>
[+] Гибкий интерфейс, поддерживающий широкоэкранные мониторы, в режиме аппаратного ускорения. Включается опцией UILayout в mm8.ini.
[+] Точная позиция эффектов в режиме аппаратного ускорения.
[+] Точная позиция верхней части неба на внешних картах в режиме аппаратного ускорения.
[+] В режиме аппаратного ускорения игра слишком часто отдавала приоритет взаимодействию со спрайтами по краям экрана.
[-] В режиме аппаратного ускорения низ спрайтов не реагировал на нажатие мыши в подземельях, когда мышь отодвинута от центра обзора по горизонтали.
[-] Мой баг: "Прицеливание мышью с точностью до пикселя в режиме HD" не работало.
  << MM7 >>
[+] Опция HigherCloseRingsButton размещает кнопку закрытия обзора колец около лупы, открывающей его - так же, как в MM6. Значение по умолчанию: 1 (включена).
[-] Кнопка закрытия обзора колец в экране инвентаря была сдвинута на 1 пиксель.
[-] В английской версии текст автозаметки для мастера ремонта был заменён дублем автозаметки гранда торговли.
[-] В английской версии гранд идентификации предметов упомянался, как находящийся в Авли, а не в Тулареанском лесу. Ранее я исправил это в автозаметках, но не исправил в тексте разговора.
[-] Мой баг: Нажатие кнопки быстрой загрузки в тот момент, когда персонаж получает повреждение, приводило к недолгому шипящему звуку.
  << Исправления на картах >>
[-] Пустыня Бракада (out06): Магазины не имели ведущего к ним телепорта, вместо этого было 2 телепорта к храму.
[-] Замок Грифонхарт (d33): Взятые портреты снова появлялись на стенах при повторном входе.
[-] Дом с привидениями (d37): Взятый портрет снова появлялся на стене при повторном входе.
[-] В исправлении для выходов из Горы Громовой Кулак команда смотрела в неверном направлении при входе/выходе из подземелья.

Изменения версии 2.2:
  << MM6 - MM8 >>
[+] Клавиша быстрой загрузки теперь работает во время видео смерти.
[+] Можно менять размер окна игры.
[+] Параметры StretchWidth и StretchHeight задают множитель, на который могут растягиваться ширина и высота области игры, чтобы уменьшить чёрные полосы по краям. Параметры StretchWidthFull и StretchHeightFull используются только если при этом игра занимает весь экран.
[+] Теперь при программной отрисовке 3D-вид всегда растягивается линейно - это уменьшает мерцание.
[+] Для курсора управления мышью используется Data\MouseLookCursorHD.bmp в 32-битном режиме цвета, если окно игры больше 640x480.
[+] Настраиваемые курсоры мыши: Data\MouseCursorArrow.cur и Data\MouseCursorTarget.cur используются вместо встроенных, если существуют.
[+] Теперь DLL'ки dgVoodoo игнорируются, если SupportTrueColor не отключён.
[+] Уровень приближения миникарты теперь запоминается всегда, а не только на внешних картах, как раньше.
[-] Исправлен вылет, найденный в Таталии в MM7.
[-] Неактивные персонажи не могли пользоваться сундуками.
[-] Анимированные текстуры (с помощью TFT) анимировались неверно: первый кадр был более длинным, последний - более коротким.
[-] Мой баг: ScalingParam2 читался из параметра ScalingParam1 в INI.
[-] Мой баг: Мышь в правом-нижнем углу иногда приводила к вылету.
[*] Более умное исправление использования неактивных персонажей (FixInactivePlayersActing): теперь можно выбирать неактивных персонажей, но нельзя использовать.
  << MM7, MM8 >>
[+] Точное положение спрайтов в режиме аппаратного ускорения.
[+] Прицеливание мышью с точностью до пикселя в режиме HD.
[+] Установите TurnBasedWalkDelay в удобное значение (например, 100), чтобы делать индивидуальные шаги в фазе движения пошагового режима.
[+] Улучшенная анимация воды.
[+] Секция MipmapsBase в INI управляет числом мипмэпок, генерируемых для текстур с совпадающим именем. Меньшие значения приводят к большему числу мипмэпок.
[+] Отдельные опции HDWTRCountHWL и HDWTRDelayHWL для случая NoD3DBitmapHwl=0.
[+] Скрытая опция FixMonsterSummon (по умолчанию 1 - включена).
[-] Некоторые косметические баги исправлены в icons.lod.
[-] Комбинация атрибутов поверхности IsWater и AnimateTFT приводила к смене текстуры в аппаратном режиме.
[-] Исправлен редкий вылет, вызванный полигоном без вершин.
[-] Мой баг: Искры выглядели неверно в предыдущей версии.
  << MM7 >>
[+] Иконки благословения и других подобных заклинаний около портретов игроков теперь могут быть прозрачными.
[-] Статические спрайты (например, бочки) показывались сжатыми по вертикали в помещениях в режиме аппаратного ускорения.
[-] Иконки полёта и хождения по воде не показывались в диалоге простого сообщения.
[-] Шкала здоровья первых 2 игроков и значки опасности всех игроков были смещены на 1 пиксель (управляется скрытой опцией FixInterfaceBugs).
[-] Мой баг: В версии для Буки был испорченный файл с приветствиями NPC.
[-] Мой баг: Русское описание в инсталляторе имело неверную кодировку.
  << Исправления на картах >>
[-] Врата в Бездну (t04): Телепорты поворачивали команду направо.
[-] Гора Нигон (out10): Правая сторона таверны не реагировала на нажатия мыши.
[-] Мой баг: Исправления для АвЛи (out14), Кургана II (mdk03) и некоторые для Горы Нигон (out10) не были включены в прошлую версию.

Изменения версии 2.1:
  << MM6 - MM8 >>
[+] Рендеринг в высоком разрешении в полноцветном аппаратном режиме. Полноцветный (32-битный) режим поддерживается в оконном и оконно-полноэкранном режиме. Чтобы отключить, добавьте "SupportTrueColor=0" в INI. Вы можете задать опции RenderMaxWidth и RenderMaxHeight, чтобы ограничить разрешение рендеринга. Скрытые опции ScalingParam1 (по умолчанию 3) и ScalingParam2 (по умолчанию 0.2) задают чёткость при растяжении интерфейса.
[+] Опция "BorderlessFullscreen" включает оконно-полноэкранный режим - вместо смены разрешения игра растягивается на полный экран, с чёрными полосами, если они нужны. Установите её в 0, чтобы отключить.
[+] Опции "WindowWidth" и "WindowHeight" устанавливают размер окна в оконном режиме. Значение -1 означает "вычислить автоматически исходя из сохранения пропорций".
[+] Видеоролики плавно растягиваются на любой размер. Чтобы отключить для старого полноэкранного режима, добавьте "SmoothMovieScaling=0" в INI, а для оконного режима добавьте "CompatibleMovieRender=0" (не рекомендуется!).
[+] Свои архивы SND и VID. Работают точно так же, как архивы LOD.
[+] Опции "TurnBasedSpeed" (для хода монстров) и "TurnBasedPartySpeed" (для хода игрока) ускоряют пошаговую битву.
[+] При переключении с режима управления мышью на обычный режим мышь помещается в центр экрана, если с момента прошлого переключения прошло более 10 секунд. Иначе она остаётся на прошлом месте. Число секунд задаётся скрытой опцией "MouseLookRememberTime".
[+] Пока нажата правая кнопка мыши, управление мышью теперь отключается, чтобы легко можно было проверить активные заклинания, текущее время, или произвести какое-то действие, нажав левую кнопку мыши, не отпуская правую. Установите MouseLookWhileRightClick=1, чтобы оставлять управление мышью включённым.
[+] Опция PlayMP3 теперь поддерживает файлы WAV в папке Music. Музыка в формате WAV исключает проблемы с зацикливанием воспроизведения.
[+] Другой подход к исправлению сундуков: теперь содержимое упорядочивается по силе и первыми в сундук кладутся более важные/сильные вещи. Установите FixChestsByReorder=0, чтобы отключить.
[+] Чёрные зелья не тратятся, если уже были выпиты.
[+] Бесконечная дальность обзора в подземельях (монстры не пропадают, если они слишком далеко).
[+] Скрытая опция "FixInfiniteScrolls" контролирует соответствующее исправление.
[-] Исправлены баги, связанные с таймерами: таймер сбрасывался, если посетить локацию до того, как его период прошёл; в MM6, в момент очередного посещения карты на поздней стадии игры, колодцы можно был использовать огромное число раз; в MM8 таймеры, не связанные с пополнением колодцев, работали не так, как в MM6 и MM7. Чтобы отключить исправление, добавьте строку "FixTimers=0" в INI.
[-] Мой баг: файлы *.evt и *.str загружались из DataFiles неверно.
[-] Монстры теперь редко спрыгивают с мостов в лаву. Высота, с которой монстры не прыгают, настраивается скрытой опцией "MonsterJumpDownLimit" (по умолчанию 500).
[-] Немного уменьшена высота прыжка, поскольку после исправления ошибок округления при движении игрок стал прыгать слишком высоко. Ещё добавлена скрытая опция "FixMovement=0", возвращающая ошибки округления для тех, кому они дороги.
[-] Бластеры и некоторые заклинания не попадали по крысам.
[-] Вылет при слишком сильном уменьшении спрайтов (происходил при использовании MM6HD).
[-] Городской портал тратил ход игрока, даже если отказаться от телепортации.
[-] Команды EVT не могли работать с некоторыми умениями.
[-] Вылет при выходе.
[*] Некоторые опции скрыты, чтобы уменьшить число мало нужных строк в mm7.ini.
  << MM6, MM7 >>
[-] Бой баг: вылет при загрузке своих архивов LOD. (не знаю, как они вообще работали!)
[-] В диалоге покупки, если ни один игрок не выбран, происходило чтение "левой" памяти.
[-] Магазины покупали бластеры.
  << MM7, MM8 >>
[+] Мипмэппинг в режиме аппаратного 3D, настраиваемый опцией "MipmapsCount". Значение 3 оптимально. Более большие значения уменьшают мельтешение вдалеке, но слишком сильно уменьшают качество текстур. Установите значение 1, чтобы отключить, как было в оригинальной игре. Значение -1 приведёт к генерации очень большого количества мипмэпок.
[-] Вокруг спрайтов и берегов была небольшая чёрная обводка в режиме аппаратного 3D.
[-] Сломанные, но не идентифицированные веши в магазинах выглядели зелёными, а не красными.
[-] После использования заклинания "Телепатия" или воровства труп монстра не давал случайный предмет.
[-] Светло-серое моргание в полноэкранном режиме на некоторых компьютерах.
[-] Вылеты и зависания при игре в Аркомаг - и то, и другое произошло в MM7, но исправлено и в MM8.
[-] Загрузка игры в момент фазы ходьбы пошагового режима приводило к невозможности использования заклинаний.
[-] У монстров, призванных другими монстрами, выставлялся неверный союзный монстр.
[-] Игра использовала режим "асинхронного" курсора мыши, несовместимый с управлением мышью, если в реестре "D3D Device" = 1. Контролируется скрытой опцией "DisableAsyncMouse".
[-] Теперь свойства особых предметов в items.txt могут быть заданы стандартными английскими именами "of ...". Это должно исправить ошибки с отсутствием у них указанных свойств в некоторых локализациях.
[-] Магазины не могли чинить некоторые артефакты.
[-] Лава обжигала персонажей в воздухе.
[-] Нажатие Alt+Tab во время победного ролика приводила к глюкам.
[-] Утечка памяти в коде генерации мипмэпок.
[*] Опция "ReputationNumber" теперь показывает положительное значение для хорошей репутации. До этого она показывала отрицательные значения, т.к. таково внутреннее представление репутации в игре.
  << MM7 >>
[-] Мой баг: умение "Топор" добавлялось к повреждению уже на уровне эксперта, а не мастера.
[-] При использовании посоха на уровне Магистр игнорировалась прибавка умения "Оружейник" к урону.
[-] Шлем Таледона не увеличивал умение магии света.
[-] Мой баг: в Авли были проблемы с палитрами монстров.
[-] Мой баг: опция FixChests=1 приводила к глюку - исполнение кода события обрывалось при открытии сундука.
[-] Монстры призывали неверных монстров (например, Архимаги призывали Сильфид).
  << Исправления на картах >>
[+] Теперь квест на продвижение до Чемпиона принимает победы на сложности "Лорд", а не только "Рыцарь".
[-] Цитадель Титанов, Инкубатор, Приливные пещеры, Курган II (d09, d10, d17, mdk03): Правильнее работают сундуки с квестовыми предметами.
[-] Винный погреб (d16): Подсказка входной двери заменена с "Покинуть Семейный дом вампиров" на "Покинуть винный погреб".
[-] Небеса (d25): Центральный фонтан работал только 1 раз.
[-] Гора Нигон (out10): Чернокнижники убивали 2 крестьян. Половина двери тренировочного здания не реагировала на нажатия.
[-] Хармондейл (out02): Сигнальные огни переставали гореть после перезагрузки.
[-] Башня Вильяма Сетага, Врата в Бездну (mdt10, t04): сундуки имели подсказку "Дверь".
[-] Курган II (mdk03): Крыса часто появлялась внутри стены.
[-] АвЛи (out14): Летающий камень нахдился по координатам x:-15088 y:-4288.
[-] Земля гигантов (out12): Колодец по координатам x:14972 y:3968 должен был стоить 5000, но использовался без оплаты, превращаясь в чит при использовании Защиты от магии.
[-] Исправления из последней версии патча Black Phantom'а (с дополнительными правками):
- Лабиринт (d02): Раньше сундук, содержащий квестовый предмет "Прах Халдара" можно было открывать только один раз. При последующих попытках открытия он содержал уже другие предметы. Таким образом, игрок мог потерять этот квестовый предмет, если он не забрал его из сундука в первый раз.
- Каменный город (d24): Во время отдыха в локации "Каменный город" на отряд могли напасть гномы. Если отряд атаковал их, то охранники Каменного города становились враждебными по отношению к отряду. Теперь во время отдыха могут напасть только троглодиты.
- Изумрудный остров (out01): Объект 'Наковальня' на изумрудном острове имел неверное описание при наведении курсора мыши. Информация о колодце на Изумрудном острове, который навсегда увеличивал удачу на 2 единицы, не добавлялась в автозаметки.
- Замок Хармондейл (d29): Квест '0', который мог появляться в дневнике заданий, при посещении замка Хармондейл в течение выполнения задний АвЛи и Эрафии, был удален. Исправлено появление флагов Авли или Эрафии. Исправлено появление флагов Света или Тьмы. Теперь на их появление, помимо прохождения испытаний в Стенах Тумана или в Инкубаторе, также влияет выбор пути. Голем в замке Хармондейл появлялся сразу после нахождения всех его частей и сообщения об этом, а не после посещения Школы волшебства и оживления Голема Томасом Греем.
- Винный погреб (d16): Уникальный монстр-вампир не появлялся в Винном погребе в Таталии. Теперь он присутсвует в данной локации и за него можно получить уникальный предмет 'Плащ Вампира'. Теперь для одного из квестов пути Света нужно не просто зайти в Винный погреб, но и убить этого вампира, как и планировалось разработчиками. В отличие от оригинального патча Black Phantom'а, у вампира нет имени 'Супер-Вампир', т.к. по характеристикам он не отличается от других вампиров.
- Бездна (d26): Теперь для локации 'Инкубатор' в 'Бездне' есть видеозаставка, как планировалось изначально.
- Колония Зод (d27): Роланд, заточенный в Колонии Зод в 'Эофоле', теперь появляется только один раз - ранее он бесконечно мог разговаривать и давать ключ от Колонии Зод. Видеоролик суда над Арчибальдом теперь воспроизводится только один раз - ранее он воспроизводился при каждом выходе из Колонии Зод, при условии уничтожения 'Ксенофекса'.
- Пещеры драконов (mdt12): В пещерах драконов в Эофоле присутствовал невидимый дракон. Его можно было уничтожить, однако из него нельзя было получить деньги и предметы после уничтожения.
- Дейя (out05): Раньше охранники северного города в регионе Дейя были враждебно настроены не только к "светлым", но и к "нейтральным" персонажам. Исправлено бесконечное появление сообщения о нападениях зомби в 'Дейе' - данный баг исправлялся в официальным патче 1.1 от 3DO, но не исправлялся в патчах для русской версии от компании "Бука".
- Вильям Ласкер, в Эрафийской канализации, говорил неверное приветствие: даже после продвижения в шпионы, он называл персонажей разбойниками (предыдущее повышение).
- Сообщения Кастора в квесте пути Тьмы, по нахождению двух частей Храма, были перепутаны местами. При нахождени темной части, появлялось сообщение о нахождении светлой, и наоборот.
- Раньше задание по поиску Лорена могло быть засчитано как успешно выполненное, даже если было выполнено позже установленного срока.
- Идентичная ситуация наблюдалась с заданием по поиску планов форта Риверстрайд.
- Финальное задание не исчезало из дневника заданий после выполнения.
- Слово "Объект" в описании предметов, связанных с квестами заменено на "Квестовый предмет".
- В игре было указано неверное расположение великого магистра определения предметов. Этот баг присутствовал и в английской версии игры.
- Опционально: Вместо ослабленного красного дракона, обитающего в Пещерах драконов в Эофоле и носящего название "Мегадракон", добавлен действительно уникальный чёрный дракон с некоторыми интересными характеристиками. Он планировался разрабочиками, но каким-то причинам не был добавлен в игру.
- Опционально: Теперь при переходе в локации "Туннели Нигона" и "Тунели в Эофол" из "Горы Громовой Кулак" появляются видеозаставки. Они присуствовали в ресурсах игры, но не использовались.
- Опционально: Раньше западный выход из локации "Гора Громовой Кулак" вел к восточной деревне, и наоборот. Теперь все верно.
- Не были включены исправления: во время отдыха в локации "Храм Тьмы" на отряд могли напасть умертвия; Дракон на Изумрудном острове теперь имеет особое название 'Моркарак'. Оба не являются однозначно положительными.

Остальные изменения:
[+] Возможность использовать несколько быстрых сохранений. (см. ниже)
[+] F2 Включает и выключает удвоенную скорость. Опция "DoubleSpeedKey" контролирует клавишу.
[+] Опция "PlayMP3" позволяет проигрывать файлы MP3 вместо треков с CD. (см. ниже) По умолчанию установлен 0 (отключена).
[+] Опция "MusicLoopsCount" меняет количество повторов музыки. Установите на 0, чтобы музыка крутилась бесконечно.
[+] Управление мышью. (см. ниже)
[+] Опция "ToggleCharacterScreenKey" открывает/закрывает экран персонажа. По умолчанию это кнопка '~'. Чтобы отключить, установите в 0.
[+] Опция "InventoryKey" позволяет зайти в инвентарь персонажа нажатием кнопки 'I', вместо того чтобы кликать по портрету. Чтобы отключить, установите в 0.
[+] Клавиша, задаваемая опцией "AutorunKey" (по умолчанию F3) включает и выключает автобег, как в MMORPG.
[+] Опции "TurnSpeedNormal" и TurnSpeedDouble" устанавливает скорость плавного поворота. По умолчанию стоит 100% для обычной скорости и 120% для удвоенной. Скорость поворота теперь устанавливается плавной по умолчанию.
[+] Опция "MouseWheelFly" позволяет подлетать вверх и вниз, вращая колесико мыши.
[+] Опция "AlwaysStrafe" меняет поведение стрелок влево-вправо на противоположное - при их нажатии происходит шаг в сторону, а если зажат Ctrl, то поворот. В режиме управления мышью шаги в стороны включаются автоматически (это можно отключить, поставив NormalStrafe=1).
[+] Опция "FreeTabInInventory" позволяет переключаться по Tab на дохлых персонажей пока открыт экран персонажа.
[+] В подсказке к "Атака" и "Точн.п." показывается время восстановления.
[+] Возможность отключить видеоролик при смерти отряда. (опция NoDeathMovie)
[+] Добавлена опция NoCD. Работает только при наличии файла "Anims\Magic7.vid". По умолчанию установлена 1 (опция активна).
[+] Опция "NoIntro" убирает заставки разработчиков, а стартовое видео показывает при запуске новой игры. По умолчанию установлен 0 (отключена).
[+] Опция "HardenArtifacts" позволяет применять зелье "Закалка" к артефактам. По умолчанию установлена 1 (включена).
[+] Зелья "Закалка", "Перезарядка" и другие подобные зелья не исчезают, если применять их к предметам, на которые они не действуют.
[+] Опция "NoVideoDelays" отключает задержки перед и после показа видео. По умолчанию установлена 1 (включена).
[+] Опция "ReputationNumber" показывает численное значение репутации вместе с названием категории. По умолчанию установлена 1 (опция активна).
[+] Опции "PaletteSMul" и "PaletteVMul" позволяют задавать, насколько светлыми и яркими выглядят цвета. Используется представление цвета HSV.
[+] Теперь монстры имеют правильные цвета в режиме Direct3D, опция "Оттенки" больше не актуальна. d3dsprite.hwl теперь не используется.
[+] Правильно определяются границы монстров в режиме Direct3D.
[+] Опция "NoBitmapsHwl" позволяет брать текстуры из bitmaps.lod вместо d3dbitmap.hwl в режиме Direct3D. Это приводит к лучшему качеству текстур, но мельтешению их вдали. По умолчанию стоит 1 (включена).
[+] Опции "HDWTRCount" и "HDWTRDelay" контролируют число кадров воды (до 15) в режиме аппаратного ускорения графики и задержку между ними.
[+] Опции "HorsemanSpeakTime" и "BoatmanSpeakTime" устанавливают время, необходимое конюху и моряку, чтобы сказать "Поехали" перед тем, как начнет загружаться новая карта.
[+] Более плавные кадры воды для режима аппаратного ускорения.
[+] При запуске в полноцветном режиме игра автоматически переходит в 16 бит в оконной моде.
[+] Идентификация монстров теперь показывает точные значения сопротивляемостей.
[+] Свои LOD-архивы (для модов). Например, архивы Data\*.icons.lod загружаются после icons.lod, заменяя его содержимое. Так же с любым другим LOD-архивом.
[+] Полезно для моддеров: файлы, извлеченные из events.lod, также загружаются из папки "DataFiles". (см. ниже)
[+] При старте игры загружаются все файлы *.dll из папки "ExeMods" (это использует MMExtension и можете использовать Вы, чтобы добавить свой патч).
[+] Улучшенная обработка ошибок. (см. ниже)
[+] Опция "BlasterRecovery" контролирует минимальное время восстановления бластера. По умолчанию установлено 5. В игре был 0.
[+] Теперь используется менеджер памяти Delphi. Ограничение на количество выделенной памяти убрано.
[+] Расширена команда переключения состояния двери. Теперь моддеры могут передавать 3 вместо 2 для переключения двери, срабатывающего и в процессе движения.
[-] Баг Mok's patch: были глюки с анимацией в домах и даже вылеты.
[-] Можно было пить из фонтанов много раз, если все персонажи неактивны.
[-] Можно было атаковать врага неактивным персонажем. Это исправление можно отключить, установив FixInactivePlayersActing=0.
[-] При использовании заклинания "Городской портал" игра теперь переходит в режим паузы.
[-] Исправлена рассинхронизация между слотами сохранения и загрузки. Теперь можно использовать самый первый слот и делать пропуски между слотами.
[-] Исправлена проблема исчезновения звука шагов.
[-] Работает на Windows XP без установки совместимости.
[-] Неактивные персонажи могли использовать свитки.
[-] Бонусы предметов к умениям оружия не учитывались при вычислении времени восстановления (единственный такой предмет - артефакт Аня Селвинг).
[-] Защита от Магии не защищала от яда.
[-] Бонус "Падения Пера" не работал (и Сандалии Гермеса тоже).
[-] Кинжал в правой руке мог наносить тройной урон даже на уровне Эксперт.
[-] Шанс нанести тройной урон кинжалом был равен 10% вне зависимости от умения Кинжал. Опция "ProgressiveDaggerTrippleDamage" исправляет это - шанс нанести тройной урон становится равным умению кинжала. По умолчанию установлена 1 (опция активна).
[-] Спешка не работала, если в команде есть труп, считающийся уставшим.
[-] Убрана глючная возможность локализации имени файла автосохранения.
[-] Теперь предметы, не поместившиеся в сундук, появятся в нем при следующем открытии, если освободить место. (опция "FixChests")
[-] Кнопка "Вернуться в игру" в меню игры работала некорректно.
[-] Отключена проверка ошибок DirectDraw. Она приводила ко множеству проблем на некоторых компьютерах.
[-] Пра атаке больших монстров вблизи в режиме Direct3D персонажи очень часто стреляли вместо того, чтобы драться в рукопашную.
[-] Исправлен баг из-за которого сосуды лича не появлялись в Стенах Тумана.
[-] Ограничена скорость движения текста в окне "Создатели".
[-] В окне генерации команды ограничена скорость анимации.
[-] Сообщение 'Invalid ID reached!', засорявшее ErrorLog.txt, теперь игнорируется.
[-] Исправлены некоторые ошибки выхода за границы бока памяти.
[-] Умение Копьё не давало прибавки к повреждению на эксперте, начинало давать только на мастере.
[-] Медленное движение глючило на многих компьютерах из-за проблем с округлением. Это происходило и с игроком, и с NPC.
[-] Автосохранение происходило после оплаты путешествия на лошадях или корабле.
[-] Ожидание с использованием диалога отдыха восстанавливало действия персонажей в 2 раза быстрее.
[-] Нажатия клавиш теоретически могли игнорироваться, если одновременно с игрой запущены другие программы, опрашивающие клавиатуру тем же способом.
[-] Редкий случай "отрицательное значение/0" в экране статистик приводил к вылету.
[-] Некорректно загружались установки таких клавиш, как R (Отдых). Исправление прошлой версии было не полным.
[-] Маяк Ллойда сохранял игру после вычитания маны и добавления времени восстановления.
[-] Городской портал сохранял игру после добавления времени восстановления.
[-] Городской портал сохранял игру даже при телепорте в текущую карту.
[-] У некоторых игроков на экране появлялась вспышка Радужного Света, которая не исчезала.
[-] Корректно исправлены проблемы с ошибками округления при движении. Из-за этих проблем глючило медленное движение и шаги вбок, а также прыжка была ниже, чем должна быть.
[-] На некоторых компьютерах время от времени переставало работать сохранение. На самом деле это вызвано багом какого-то системного ПО, а не самой игры.
[-] Архиву games.lod требовалась очень специфическая сортировка.
[-] Дверь одного из магазинов на острове в Таталии не реагировала на нажатия мыши.

Изменения из Mok's patch:
- исправлено заклинание "Психический шок" (повреждения 12 + 1-12 вместо 12 + 1).
- улучшена поддержка аппаратного ускорения (Win2k/XP)
- улучшена поддержка звука и видео (более новые версии библиотек "Bink", "Smacker" и "Miles Sound System")
- убрана глючная проверка свободного места на диске
- исправлено заклинание "Спешка" (а также "Час силы", одним из эффектов которого является "Спешка"). За исправление спасибо Mike Kienenberger.
- исправлено сообщение при сохранении игры на арене.
- исправлен баг, приводящий к порче инвентаря, если применить заклинание "Перезарядка" к посоху без зарядов. Теперь оно просто не применимо к таким посохам.
- больше не генерируются посохи без зарядов. У всех посохов как минимум 1 заряд. Существующие посохи в сохраненных играх не будут исправлены.
- исправлено заклинание "Паралич". Теперь его нельзя применять к трупам.
- Клавиша "Caps Lock" переключает режим бега/ходьбы, если опция "CapsLockToggleRun" имеет значение 1. По умолчанию установлена в 0 (не активна). (Эта опция управления была добавлена в GrayFace Patch)

Изменения из старой версии патча Black Phantom'а <mailto:mm6789@yandex.ru>:
- Исправлена ошибка неработающих уникальных предметов.
- Переработан перевод игры: исправлено множество ошибок, неточностей и недочётов в переводе игры.
- Исправлены другие мелкие ошибки.

Все опции настраиваются в файле mm7.ini. Он создается при первом запуске.
Опции, зависящие от перевода, находятся в mm7lang.ini. Чтобы поменять какую-нибудь из них, создайте опцию с таким же именем в mm7.ini, потому что mm7lang.ini перезаписывается при установке новой версии патча.

--------------------------------------------------------------------------------
Быстрые сохранения:
Нажмите F11, чтобы сохранить игру. Вы увидите сообщение "Игра сохранена!". Вы можете изменить клавишу быстрого сохранения - это опция "QuickSavesKey" в mm7.ini.
Опция "QuickSavesCount" контролирует количество быстрых сохранений.
Опция "QuickSavesName" задает имя для сохранений. По умолчанию это "Быстрое сохранение".
Опция "SpaceBeforeQuicksaveDigit" контролирует, нужен ли пробел между строкой "Быстрое сохранение" и номером сохранения.
Опция "QuickLoadKey" задает клавишу быстрой загрузки.

--------------------------------------------------------------------------------
Использование музыки в MP3:
Создайте папку "Music" в директории с игрой и скопируйте туда файлы от "2.mp3" до "20.mp3", соответствующие трекам с CD. Установите опцию "PlayMP3" в 1. В отличие от музыки с CD, громкость музыки в MP3 зависит от общей громкости звука, установленной в настройках, поэтому ставьте громкость музыки на максимум.

--------------------------------------------------------------------------------
DataFiles:
Создайте папку "DataFiles" в директории с игрой. Чтобы изменить файл из events.lod, извлеките его и положите в папку "DataFiles". Игра будет использовать его вместо файла из events.lod и Вам не придется при каждой модификации вставлять файл в events.lod.
Управляется опцией "DataFiles", которая установлена в 1 (включена) по умолчанию.

--------------------------------------------------------------------------------
Свои архивы
Свои архивы - это лучший способ распространения файлов модов. Здесь на английском описан порядок их загрузки: https://www.dropbox.com/s/iv9c2jc8abbrj6a/CustomLods.txt?dl=0

--------------------------------------------------------------------------------
Управление мышью:

Чтобы включить управление мышью (как в 3D action'ах), установите опцию MouseLook=1.
Управление мышью можно использовать в режиме, близком к 3D Action'ам или в режиме, близком к World of Warcraft и подобным играм.
Вот файл с моими настройками для режима 3D Action'а: http://sites.google.com/site/sergroj/mm/MM6MouseLook.rar

Чтобы включить режим, подобный MMO, установите опцию MouseLookUseAltMode=1 или нажмите Caps Lock, если вы включили опцию CapsLockToggleMouseLook=1. Также для этого режима можно установить "MouseLookTempKey" в 4 или код другой клавиши и сбросить на 0 опцию "MouseLookChangeKey".
Опция "MouseLookChangeKey" задает клавишу переключения между режимом управления мышью и обычным режимом. Режим сбрасывется при открытии любого диалога. Клавиша по умолчанию - средняя кнопка мыши.
Опция "MouseLookTempKey" задает клавишу, которая переключает режим только на то время, пока Вы её держите.
Опция "MouseLookPermKey" задаёт клавишу, которая переключает режим управления мышью, но он не сбрасывается при открытии диалога.
Опции "MouseSensitivityX" и "MouseSensitivityY" управляют чувствительностью мыши по осям X и Y. Установка отрицательного значения чувствительности по Y инвертирует эту ось. Допустимы значения больше 100.
Опции "MouseSensitivityAltModeX" и "MouseSensitivityAltModeY" аналогичны, но используются в альтернативном ММО-подобном режиме.
Опция "MouseLookFly" позволяет летать вверх-вниз, просто направляя мышь.
Опция "MouseWheelFly" позволяет подлетать вверх и вниз, вращая колесико мыши. Это особенно полезно для взлёта в режиме управления мышью.

Изображение курсора для управления мышью находится в файле Data\MouseLookCursor.bmp

--------------------------------------------------------------------------------
Видео в режиме аппаратного ускорения:

Если мультики не проигрываются в режиме 3D ускорения, попробуйте сделать так:
Нажмите Win+R, напишите Regedit, в нём выберите:
HKEY_LOCAL_MACHNE/Software/New World Computing/Might and Magic Day of the Destroyer/1.0 
Или на 64-битных версиях Windows:
HKEY_LOCAL_MACHNE/Wow6432Node/New World Computing/Might and Magic Day of the Destroyer/1.0 
Установите 2dacceloff на 1.

--------------------------------------------------------------------------------
Гибкий интерфейс:

Если установить UILayout=UI, будет загружен гибкий интерфейс под именем "UI". Файл определения интерфейса называется Data\UI.txt, а графика загружается из icons.UI.lod. Можно создать свои файлы, модифицирующие определение интерфейса под именем *.UI.txt или же можно создавать полностью новые определения интерфейса, но я не сделал описание их формата.

После первого использования, Вы увидите следующие опции в секции [UILayout=UI]:
Scale=1  - Увеличение этого значения укрупнит интерфейс, уменьщение - уменьшит
PartyScale=1.11  - Управляет размером полоски с портретами персонажей
PortraitsDistance=17  - Расстояние между портретами персонажей
FlyEtcOnTop=1  - Если установить 0, иконки Полёта и Хождения по воде будут находиться снизу
FOVMul=1  - Множитель ширины обзора
StatusbarScale=0  - По умолчанию размер строки состояния выбирается автоматически, но можно устанавливать его вручную
StatusbarPlace=0  - Может иметь 3 значения: -1 - на верху экрана, 0 - над портретами, 1 - под портретами
ShrinkStatusbar=1  - Размер строки состояния определяется текстом в ней (игнорируется, если StatusbarPlace=1 или HideStatusbar=0)
HideStatusbar=1  - Прятать строку состояния, когда она пустая (игнорируется, если StatusbarPlace=1)
MouseShiftY=30  - Вертикальный сдвиг средней точки экрана

--------------------------------------------------------------------------------
В случае ошибки:

Если произошла ошибка, отправьте мне описание, как и когда она произошла. Если возможно, приложите сохранение. Если игра вылетела, отправьте еще файл ErrorLog.txt, который будет в директории с игрой.
